<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主操作台 - 欠账管理工具</title>
    <link rel="stylesheet" href="style.css">
    <!-- 我们会为 dashboard 创建一个专属的样式文件 -->
    <link rel="stylesheet" href="dashboard.css"> 
</head>
<body>
    <header class="header">
        <div class="container">
            <h1>欠账管理工具</h1>
            <div class="user-info">
                <span id="welcome-message"></span>
                <button id="logout-btn" class="btn btn-secondary">退出登录</button>
            </div>
        </div>
    </header>

    <main class="container main-content">
        <!-- 左侧：欠款人列表 -->
        <aside class="sidebar">
            <h2>欠款人列表</h2>
            <ul id="debtors-list" class="debtors-list">
                <!-- 欠款人将通过 JS 动态插入到这里 -->
            </ul>
            <form id="add-debtor-form" class="add-form">
                <input type="text" id="new-debtor-name" placeholder="添加新欠款人..." required>
                <button type="submit" class="btn">+</button>
            </form>
        </aside>

        <!-- 右侧：欠款明细 -->
        <section class="details-panel">
            <div id="details-view">
<!-- 从这里开始替换 -->
<h2 id="current-debtor-name">选择一个欠款人查看明细</h2>
<div class="debtor-summary">
    <p id="total-unpaid-amount" class="total-amount"></p>
    <button id="repay-btn" class="btn btn-success hidden">记录一笔还款</button>
</div>
<ul id="debt-items-list" class="debt-items-list">
    <!-- 欠款明细将通过 JS 动态插入到这里 -->
</ul>
<!-- 这是新的可点击的标题 -->
<div id="payments-history-toggle" class="history-toggle hidden">
    <h3>还款历史</h3>
    <span class="toggle-icon">▼</span>
</div>
<ul id="payments-history-list" class="debt-items-list">
    <!-- 还款历史将通过 JS 动态插入到这里 -->
</ul>
<form id="add-item-form" class="add-form hidden">
    <h3>添加新账目</h3>
    <input type="date" id="item-date" required>
    <input type="text" id="item-description" placeholder="账目描述" required>
    <input type="number" id="item-price" placeholder="单价" step="0.01" required>
    <input type="number" id="item-quantity" placeholder="数量 (默认1)" step="1" min="1">
    <button type="submit" class="btn">添加账目</button>
</form>
<!-- 结束替换 -->
            </div>
            <div id="welcome-view" class="welcome-view">
                <p>欢迎使用！从左侧选择或添加一个欠款人开始记账。</p>
            </div>
        </section>
    </main>
        <!-- --- 把这块代码粘贴到 script 标签的上一行 --- -->
    <div id="spinner-overlay" class="spinner-overlay hidden">
        <div class="spinner"></div>
    </div>
    <!-- 引入新的 JS 文件来处理 dashboard 的逻辑 -->
    <script src="dashboard.js"></script>
</body>
</html>